# Karma Player

```
88      a8P         db        88888888ba  88b           d88        db           88888888ba  88                 db   8b        d8 88888888888 88888888ba
88    ,88'         d88b       88      "8b 888b         d888       d88b          88      "8b 88                d88b   Y8,    ,8P  88          88      "8b
88  ,88"          d8'`8b      88      ,8P 88`8b       d8'88      d8'`8b         88      ,8P 88               d8'`8b   Y8,  ,8P   88          88      ,8P
88,d88'          d8'  `8b     88aaaaaa8P' 88 `8b     d8' 88     d8'  `8b        88aaaaaa8P' 88              d8'  `8b   "8aa8"    88aaaaa     88aaaaaa8P'
8888"88,        d8YaaaaY8b    88""""88'   88  `8b   d8'  88    d8YaaaaY8b       88""""""'   88             d8YaaaaY8b   `88'     88"""""     88""""88'
88P   Y8b      d8""""""""8b   88    `8b   88   `8b d8'   88   d8""""""""8b      88          88            d8""""""""8b   88      88          88    `8b
88     "88,   d8'        `8b  88     `8b  88    `888'    88  d8'        `8b     88          88           d8'        `8b  88      88          88     `8b
88       Y8b d8'          `8b 88      `8b 88     `8'     88 d8'          `8b    88          88888888888 d8'          `8b 88      88888888888 88      `8b


                                                🎵 AI-powered music search 🎵
```

> **Phase 0 of the Trust Tune Network**
> A distributed trust validation infrastructure where communities validate content quality through a two-tier system.

![Karma Player Demo](demo_full.gif)

---

## 🎯 The REAL Problem

**The music industry is broken.**

```
Spotify pays artists: $0.003-$0.005 per stream
         ↓
    1 million streams = $3,000-$5,000
         ↓
    Label takes 80-90%
         ↓
    Artist gets: ~$300-$500
         ↓
    For a MILLION streams.
```

Meanwhile:
- ❌ **Corporations exploit creators** - Keep the majority, provide limited transparency
- ❌ **Users get a bad deal** - Pay monthly subscriptions, but artists still starve
- ❌ **Algorithmic bias favors major labels** - Indie artists get buried despite quality
- ❌ **Opaque recommendation systems** - Platforms optimize for label deals, not listeners
- ❌ **Pay-to-play playlisting** - Money determines visibility, not merit
- ❌ **No real analytics** - Artists don't know WHO loves their music or WHERE
- ❌ **Users worldwide are tired** of being data products for corporations

**But we all want the same thing:**
- 🎵 **Great music** - High quality, accessible, properly attributed
- 💰 **Fair compensation for creators** - Artists deserve the lion's share
- 🔍 **Transparency** - Who's listening, where, why (for artists AND users)
- 🚫 **No corporate middlemen** - Taking 90% and providing 10% value

**The technical problem** (finding good torrents) is trivial compared to the social problem: *How do we create a system where creators actually benefit from people loving their music?*

---

## 🎨 Why This Exists: Empowering Creators, Not Exploiting Them

**The fundamental problem:** Streaming platforms are black boxes. Spotify pays artists $0.003-$0.005 per stream, keeps the lion's share, and provides limited transparency about who's listening, where, or why. Labels take most of what's left. Artists get pennies.

**Our belief:**

> **Artists WANT their music heard worldwide.** More reach = more fans = more shows = actual income.
> **Artists DESERVE transparent compensation** when the network generates revenue.
> **Nobody wants ads.** We hate them too.

### The Vision: Transparent Creator Compensation

```
┌─────────────────────────────────────────────────────────────────┐
│              CREATOR-FIRST REVENUE MODEL (Future)               │
│                                                                 │
│  Phase 1 (Now): Free, open access                              │
│    → Build trust network & verified content library            │
│    → Prove the model works                                     │
│                                                                 │
│  Phase 2 (Critical Mass): Optional paid features               │
│    → Premium: ad-free, faster downloads, priority support      │
│    → Revenue split: 95% Creators | 5% Network                  │
│    → Payments recorded on blockchain (if implemented)          │
│    → Aggregate stats public, user data pseudonymous            │
│                                                                 │
│  Creator Controls:                                             │
│    ✓ Opt-in per song/album (approve what you share)           │
│    ✓ Full analytics dashboard (who, where, when)              │
│    ✓ Direct payments (no middlemen)                            │
│    ✓ Revoke permission anytime                                │
│                                                                 │
│  What We Won't Do:                                             │
│    ✗ Ads (we hate them too)                                   │
│    ✗ Sell user data                                           │
│    ✗ Lock content behind paywalls (free tier always exists)   │
│    ✗ Take majority revenue (95% goes to creators)             │
└─────────────────────────────────────────────────────────────────┘
```

### The Chicken-and-Egg Problem

**We know the challenge:**
Artists won't upload to a platform without users.
Users won't join a platform without content.
Revenue won't exist without scale.

**Our approach:**

1. **Phase 0 (Now):** Build trust infrastructure with existing torrents
   - Prove the validation model works
   - Create a verified content library through community validation
   - No artist participation required yet

2. **Phase 1 (Next):** Launch creator dashboard (read-only)
   - Artists can see what's being shared (their existing torrents)
   - Full analytics: plays, locations, quality preferences, trending
   - No commitment, just transparency

3. **Phase 2 (Scale):** Opt-in permissions system
   - Artists approve/block specific songs/albums
   - "I'm okay with X album being shared, not Y"
   - Still free for users, builds artist trust

4. **Phase 3 (Revenue):** Paid tier for sustainability
   - Premium features (faster, ad-free, early access)
   - **95% of revenue → Creators** (split proportional to verified plays)
   - **5% → Network** (Core validators 2.5% + infrastructure 2.5%)
   - Distribution logic: Community-governed (DAO/voting system TBD)
   - Blockchain records all transactions (transparent allocation)

**The bet:** If we build genuine trust infrastructure that respects creators AND users, both will choose to participate when they see it works.

---

## ⚖️ Legal Position (Transparency First)

**People will ask: "Is this piracy?" Answer up front:**

### What Karma Player Is NOT

❌ **A piracy tool** - We validate quality/metadata, not encourage infringement
❌ **A Spotify replacement** - We're search infrastructure, not a streaming service
❌ **A music hosting service** - No servers, no storage, no distribution
❌ **A get-rich-quick token scheme** - Karma ≠ money in Phase 0-2
❌ **Guaranteed to work at scale** - Gun.js scalability unproven (research needed)

### What It IS

✅ **Community trust validation network** - Like Wikipedia for audio quality
✅ **Metadata infrastructure** - MusicBrainz + AI + community proof
✅ **Experiment in decentralization** - Can distributed trust work at scale?
✅ **Transparent alternative** - No algorithmic gatekeeping, open validation

### Phase 0 Limitations (Be Honest)

**Current limitations you should know about:**

⚠️ **No validation network yet** - All searches hit external Jackett indexers directly (no distributed trust layer)
⚠️ **No voting system** - AI ranking only, no community validation (Phase 1+ feature)
⚠️ **Jackett dependency** - Centralized point of failure (requires local or remote Jackett server)
⚠️ **No creator compensation** - This is search infrastructure; payment system comes in Phase 3+
⚠️ **Gun.js scalability unproven** - Distributed ledger untested beyond ~10k concurrent users
⚠️ **Legal uncertainty** - Experimental infrastructure with acknowledged risks (see below)
⚠️ **Metadata gaps** - MusicBrainz lacks some regional/underground music (especially non-Western artists)

**What works NOW:**
- ✅ AI-powered search with MusicBrainz metadata
- ✅ Multi-indexer aggregation (18+ sources)
- ✅ Smart album matching and quality ranking
- ✅ Format preferences with intelligent fallback
- ✅ Auto-mode for decision-free downloads

**Phase 0 is about proving the CONCEPT:** Can AI + MusicBrainz + community validation create better search than manual torrent hunting? We're testing that hypothesis before building the full distributed network.

### Legal Framework

**DMCA Compliance:**
- Network respects takedown requests
- Flagged content removed from distributed ledger
- Transparent appeal process

**Acknowledged Risks:**
- **Secondary liability** (Napster, Grooveshark precedents exist)
- **Inducement doctrine** (MGM v. Grokster) - platforms liable if they "induce" infringement
- **Legal landscape evolves** - Court decisions unpredictable

**Mitigation:**
- Phase 0-1: Search/validation only (VPN model - no control over user actions)
- Phase 2+: Artist opt-in (creators authorize sharing)
- Focus on legal content (public domain, CC, artist-approved)
- User responsibility (clear ToS, distributed architecture)

**Reality:** This is experimental infrastructure with legal uncertainty. Community should understand the risks.

---

## 💡 The Trust Tune Network Vision

What if there was a system where:

```
┌─────────────────────────────────────────────────────────────┐
│                    TRUST TUNE NETWORK                       │
│                                                             │
│  ┌──────────────┐         ┌──────────────┐                │
│  │   95% USERS  │         │  5% CORE     │                │
│  │   (Casual)   │ ─vote─→ │ (Validators) │                │
│  │              │         │              │                │
│  │ • Download   │         │ • Validate   │                │
│  │ • Vote       │         │ • Provide    │                │
│  │ • Seed       │         │   Proof      │                │
│  │ • Progress → │         │ • Run Nodes  │                │
│  └──────────────┘         └──────────────┘                │
│         ↓                         ↓                        │
│    +1 karma/vote         +5-20 karma/validation           │
│         ↓                         ↓                        │
│  ┌─────────────────────────────────────────┐              │
│  │   DISTRIBUTED LEDGER (Gun.js)           │              │
│  │   • Pseudonymous votes                  │              │
│  │   • Cryptographic proof certificates    │              │
│  │   • Transparent, auditable              │              │
│  └─────────────────────────────────────────┘              │
│                       ↓                                    │
│              VERIFIED CONTENT                              │
│      (validated once, trusted forever)                     │
└─────────────────────────────────────────────────────────────┘
```

### The Core Insight

**Not expert gatekeeping. Community validation at scale.**

- **Casual Listeners (YOU)** vote on files after listening
- **Core Listeners** validate those votes with cryptographic proof (acoustic fingerprint + spectral analysis)
- **Progressive path to Core** (Casual → Trusted → Core Candidate → Core)
  - Requires technical skills: ffprobe, Chromaprint, spectral analysis
  - Learning resources provided, but ~5% of users estimated to qualify
  - Earn karma → apply → pass validation test → become Core
- **The network is self-governing** — no central authority, community-decided criteria
- **Trust is transparent** — all validation proofs are public and auditable

### Why This Changes Everything

Traditional systems:
- ❌ **Private trackers:** Interviews, invite trees, gatekeeping
- ❌ **Public torrents:** No quality control, decision paralysis
- ❌ **Streaming:** You trust the platform, not the community

**Trust Tune Network:**
- ✅ **Open participation** at your level (Casual or Core)
- ✅ **Community validates quality** with cryptographic proof
- ✅ **Transparent trust** — you can audit the validators
- ✅ **Self-reinforcing** — more users = more validated content
- ✅ **Distributed** — no servers, no central control (Gun.js)

---

## 🕐 Why Now? (2025 vs 2005)

**This idea isn't new. Why didn't it exist 20 years ago?**

### What Changed (Technology)

**2005 - Not Feasible:**
- ❌ Distributed databases were research projects (no Gun.js, no IPFS)
- ❌ AI couldn't parse natural language queries ("miles davis kind of blue" → ???)
- ❌ Acoustic fingerprinting was immature (Chromaprint released 2010)
- ❌ Blockchain/cryptographic proof systems didn't exist at scale (Bitcoin launched 2009)
- ❌ MusicBrainz had limited data (~500k recordings in 2005 vs 35M+ today)

**2025 - Now Possible:**
- ✅ **Gun.js** - Production-ready distributed graph database (5+ years mature)
- ✅ **LLMs** - AI can parse queries, understand context, rank quality (GPT-4, Claude, Gemini)
- ✅ **Chromaprint** - Mature acoustic fingerprinting (used by Spotify, MusicBrainz)
- ✅ **Cryptographic tooling** - Ed25519 signatures, spectral analysis, proof-of-work patterns
- ✅ **MusicBrainz** - 35M+ recordings with canonical metadata
- ✅ **Cheap compute** - AI API calls cost pennies, not dollars

### What Changed (Social)

**2005 - Wrong Cultural Moment:**
- BitTorrent was 4 years old, still niche
- "Web 2.0" was just emerging (YouTube founded 2005)
- Spotify didn't exist (launched 2008)
- Artists hadn't experienced streaming exploitation yet
- "Decentralization" wasn't a cultural value

**2025 - Right Cultural Moment:**
- **Creator economy** - Artists know they're getting screwed ($0.003/stream)
- **Decentralization movement** - People want alternatives to corporate platforms
- **AI transparency demands** - Users want to understand algorithmic decisions
- **Privacy consciousness** - People care about who owns their data
- **Torrent ecosystem mature** - Jackett, Sonarr, Radarr show automation works
- **Web3 fatigue** - "Blockchain" is tainted, but **distributed validation** makes sense

### What Changed (Economic)

**2005:**
- iTunes sold individual tracks ($0.99) - labels controlled distribution
- Piracy was "theft" - no middle ground
- No payment infrastructure for micro-transactions
- Server costs = barrier to decentralization

**2025:**
- Streaming pays artists almost nothing - **creators are desperate for alternatives**
- Blockchain enables transparent, programmable payments (Solana, etc.)
- Payment rails exist (crypto, Stripe, PayPal) for global micro-transactions
- P2P infrastructure costs near-zero (Gun.js, WebRTC)

### The 2025 Convergence

**All three prerequisites NOW exist:**

1. **Technology is ready** (Gun.js + LLMs + Chromaprint + MusicBrainz)
2. **Culture is ready** (creators + users want alternatives)
3. **Economics are ready** (streaming failed artists, payment rails exist)

**2005: Impossible.**
**2015: Too early (no LLMs, MusicBrainz incomplete, crypto too early).**
**2025: The window is OPEN.**

**Why this matters:** If we don't build this now, someone else will — probably with worse incentives (ads, surveillance, VC extraction). We have ~2-3 years before this idea becomes obvious to everyone.

**Ship fast. Build trust. Empower creators. Before the window closes.**

---

## 🎵 What Karma Player Does Today (v0.1.1)

**Karma Player is Phase 0** — proving the basic search/download flow works, before we add the network.

```
User Query → AI Parse → MusicBrainz → Torrent Search → AI Select → Download
     ↓           ↓            ↓              ↓              ↓
   "miles    artist:       MBID:       18+ indexers    Best FLAC
    davis"   Miles Davis   xxx-yyy     (Jackett)       24-bit
```

### Current Features

#### 1. AI-Powered Query Understanding
```bash
poetry run karma-player search "I know you know - Esperanza Spalding"
```

AI parses natural language:
- Identifies: artist, song, album
- Queries **MusicBrainz** for canonical metadata
- Pre-filters albums by checking torrent availability
- Presents only options that actually exist

**Multi-Provider Support:**
- 🟣 **Anthropic Claude** (recommended)
- 🟢 **OpenAI GPT** (fastest, cheapest)
- 🔵 **Google Gemini**

Auto-detects based on your API keys. No configuration.

#### 2. Intelligent Album Matching
```
Query: "fear of the dark iron maiden"
         ↓
MusicBrainz: Found 2 albums
  • Best of the Beast (compilation)
  • The Book of Souls: Live Chapter (live)
         ↓
User selects: Live Chapter
         ↓
System searches 18+ indexers
Finds 26 torrents
         ↓
AI FILTERS: Wrong album? Reject!
         ↓
Result: "The Book of Souls: Live Chapter" (FLAC 1.45GB)
         ✓ Correct album selected
```

No more downloading the wrong version.

#### 3. Quality-First Ranking

AI prioritizes:
```
Priority 1: CORRECT ALBUM (filters wrong albums first)
Priority 2: AUDIO QUALITY (24-bit > 16-bit > 320kbps)
Priority 3: SEEDERS (availability matters)
Priority 4: COMPLETENESS (proper releases > compilations)
```

Quality scoring detects:
- 🎵 Hi-res: DSD, SACD, 24-bit FLAC (192/176/96/88 kHz)
- 💿 Lossless: 16-bit FLAC, ALAC
- 🎸 Vinyl/LP rips (often superior mastering)
- 📀 Standard: 320kbps MP3, V0

#### 4. Smart Auto-Mode

Choose **[4] Just get it for me!** and the system tries strategies:

```
Strategy 1: Try single track
    ↓
  Wrong album detected?
    ↓
  ⚠️  Album mismatch! Continue...
    ↓
Strategy 2: Try full album
    ↓
  ✓ Found correct album!
    ↓
Strategy 3: Try other albums (if needed)
```

AI explains its decision with full reasoning.

#### 5. Top 3 Torrents

```
🧲 Magnet Links (Top 3):

[1] Iron Maiden - The Book Of Souls: Live Chapter (2017) [FLAC] ✓ SELECTED
    Format: FLAC | Size: 1.45 GB | Seeders: 17
    magnet:?xt=urn:btih:...

[2] Iron Maiden - The Book Of Souls: Live Chapter [2CD Japanese]
    Format: FLAC | Size: 755 MB | Seeders: 8
    magnet:?xt=urn:btih:...

[3] Iron Maiden - The Book Of Souls: Live Chapter (Alternative)
    Format: FLAC | Size: 755 MB | Seeders: 8
    magnet:?xt=urn:btih:...
```

Backup options if primary fails.

---

## 🚀 The Roadmap: From CLI to Trust Network

### Phase 0: ✅ CURRENT (v0.1.x)
**Goal:** Prove basic flow works

What works today:
- ✅ AI query parsing
- ✅ MusicBrainz metadata lookup
- ✅ Multi-indexer torrent search (18+ indexers via Jackett)
- ✅ Album-aware filtering
- ✅ Quality ranking
- ✅ Top 3 recommendations

### Phase 1: Network-First Search (Weeks 3-4)
**Goal:** Add distributed ledger

```
Search Flow Changes:

BEFORE (Phase 0):
User → MusicBrainz → External Indexers → Results

AFTER (Phase 1):
User → MusicBrainz → CHECK NETWORK FIRST → Results
                          ↓
                  Found verified files?
                    ↓              ↓
                   YES            NO
                    ↓              ↓
              Show those    → External Indexers
            (VERIFIED badge)        ↓
                                Merge results
                                    ↓
                        Rank: Verified > Quality > Seeders
```

Adds:
- Gun.js distributed ledger
- Vote tracking (local + network)
- Verified file badges
- Network-first search logic

**Success metric:** 80% of searches hit verified network files

### Phase 2: Two-Tier Validation (Weeks 5-6)
**Goal:** Community validation with proof

```
Vote Validation Flow:

Casual downloads file → Votes (+1/-1)
            ↓
    Vote enters PENDING queue
            ↓
  (visible to Core Listeners)
            ↓
    Core claims validation task
            ↓
  Core already has file?
    Yes → Validate instantly
    No → Download → Validate
            ↓
    Run validation proof:
    • Acoustic fingerprint (Chromaprint)
    • Spectral analysis (detect transcodes)
    • Format verification (ffprobe)
    • Metadata check
    • Sign with Ed25519 key
            ↓
    Core approves OR rejects
            ↓
  Approved: Casual +1 karma, Core +5-15 karma
  Rejected: Casual -2 karma, Core +5 karma
            ↓
  After X Core validations → File = VERIFIED
```

Adds:
- Core Listener role
- Validation queue interface
- Cryptographic proof system
- Karma economy
- Dynamic validation thresholds (popular files need fewer validations)

**Success metric:** Core listeners validate 50+ files, system prevents vote spam

### Phase 3: AI Intelligence (Weeks 7-8)
**Goal:** Learn from validation patterns

Adds:
- AI learns from Core validation decisions
- Ranking algorithm prioritizes verified files
- User preference learning
- Query intent improvements

**Success metric:** Top result is correct 80%+ of time

### Phase 4: Gamification (Weeks 9-10)
**Goal:** Social motivation

Adds:
- Badges (First Core, 100 Validations, Rare Content Seeder)
- Leaderboards (opt-in)
- Public profiles (opt-in)
- Progression milestones

**Success metric:** Users seed longer, vote more, Core recruitment increases

### Phase 5: Economic Sustainability (Month 4+)
**Goal:** Self-sustaining network

```
Revenue Model (IF network achieves scale):

Donations/Crypto
      ↓
Transparent distribution:
  • 95% → Content Creators (artists, labels who opt-in)
  • 5% → Network (split between Core validators & infrastructure)
      ↓
Using blockchain (Solana or similar):
  • Immutable transaction records
  • Transparent allocation
  • Community auditable
  • Team decides details IF traction achieved
```

Adds:
- Fiat/crypto payouts to Core Listeners
- Creator compensation framework (opt-in)
- Foundation/grant funding
- Economic transparency dashboard

**Success metric:** Trusted network established with high-quality validated content, network self-sustains, and transparent creator compensation achieved

---

## 🎓 Core Principles

### 1. Community-Governed, Not Corporate
```
❌ WRONG: Experts decide what's good
✓ RIGHT: Community votes → Core validates with proof
```

- No gatekeepers, only progression paths
- Earn karma → Become Core → Validate
- Transparent validation proofs (auditable)

### 2. Privacy by Default
- Votes are **pseudonymous** (hash of user ID)
- Downloads are **local-only** (SQLite on your machine)
- Identity is **never public** (unless you opt into leaderboards)
- No tracking, no data mining, no surveillance

### 3. Distributed Infrastructure
```
Gun.js Distributed Ledger

Bootstrap Nodes ←→ Node 1 (You) ←→ Node 2 (Core) ←→ Node 3 (Casual)
      ↓                  ↓               ↓                ↓
  Relay/Init       Local data      Validation        Vote data
      ↓                  ↓               ↓                ↓
            All nodes sync via federated mesh
              (no single point of control)
```

- Bootstrap nodes required initially (team-funded)
- Community peer nodes supplement as network grows
- Scalability beyond 10k users unproven (Gun.js research needed)
- No single point of control (distributed architecture)

### 4. Open Source & Transparent
- All code is public
- All validation proofs are auditable
- All karma calculations are transparent
- All economic distributions are blockchain-recorded

### 5. Legal & Ethical
- **Respects DMCA takedowns** (network removes flagged content)
- Users responsible for legal compliance in their jurisdiction
- Not a piracy tool — it's music quality validation infrastructure
- Built for music discovery with community trust validation

### 6. Creator-Positive (Future Vision)
- If network achieves scale → transparent creator compensation
- Artists/labels can opt-in to payment distribution
- Blockchain ensures transparency and immutability
- Community decides allocation model

---

## 🛠️ Installation

### Requirements
- Python 3.10+
- MusicBrainz API key (free)
- AI API key (choose one: OpenAI, Anthropic, or Gemini)
- **Jackett API instance** (torrent indexer aggregator) - see setup below

### Quick Setup (Development)

**Option 1: Install in your current environment (easiest)**

```bash
# 1. Clone and install
git clone https://github.com/trust-tune-net/karma-player
cd karma-player
pip install -e .

# 2. Initialize
karma-player init
# Enter MusicBrainz API key when prompted

# 3. Set AI key (choose one)
export ANTHROPIC_API_KEY="sk-ant-..."  # Recommended
# OR
export OPENAI_API_KEY="sk-..."
# OR
export GEMINI_API_KEY="..."

# 4. Search!
karma-player search "radiohead ok computer"
```

**Option 2: Use Poetry (for isolated development)**

```bash
# 1. Clone and install dependencies
git clone https://github.com/trust-tune-net/karma-player
cd karma-player
poetry install

# 2. Run commands with 'poetry run'
poetry run karma-player init
poetry run karma-player search "radiohead ok computer"
```

**Get API Keys:**
- MusicBrainz: https://musicbrainz.org/account/applications
- Anthropic: https://console.anthropic.com/
- OpenAI: https://platform.openai.com/
- Gemini: https://ai.google.dev/

---

### ⚙️ Jackett Setup (Required)

**Karma Player requires a Jackett instance** to search torrent indexers. Jackett is a proxy server that translates queries into tracker-specific formats and aggregates results from 18+ indexers.

#### Option 1: Run Jackett Locally (Recommended for Privacy)

**Installation:**

```bash
# macOS (Homebrew)
brew install jackett

# Linux (Debian/Ubuntu)
sudo apt install jackett

# Windows: Download from https://github.com/Jackett/Jackett/releases

# Start Jackett
jackett

# Access web UI: http://localhost:9117
```

**Configure Indexers:**

1. Open http://localhost:9117 in browser
2. Click "Add Indexer" → Search for indexers (1337x, ThePirateBay, etc.)
3. **Important:** Some indexers require **FlareSolverr** (Cloudflare bypass)
4. Copy your API key from the top-right corner

**FlareSolverr Setup (Optional but Recommended):**

Some indexers (like 1337x) are protected by Cloudflare and require FlareSolverr:

```bash
# Using Docker (easiest)
docker run -d \
  --name=flaresolverr \
  -p 8191:8191 \
  -e LOG_LEVEL=info \
  --restart unless-stopped \
  ghcr.io/flaresolverr/flaresolverr:latest

# In Jackett, go to Settings → FlareSolverr API URL
# Enter: http://localhost:8191
```

Without FlareSolverr, you'll get "FlareSolverr is not configured" errors for Cloudflare-protected indexers.

**Configure Karma Player:**

During init, enter:
- Jackett URL: `http://localhost:9117`
- API key: (copied from Jackett web interface)

#### Option 2: Use a Remote Jackett Instance

If you're running Jackett on another machine or have access to a shared instance:

```bash
# If using Option 1 (pip install -e .)
karma-player init

# If using Option 2 (poetry)
poetry run karma-player init

# Enter remote URL: https://your-jackett-instance.com
# Enter API key: (provided by instance admin)
```

#### Option 3: Request Team Access (Non-Technical Users)

**Don't have the technical skills or resources to run Jackett?**

Contact the team to request access to a shared Jackett instance:
- **GitHub Issues:** https://github.com/trust-tune-net/karma-player/issues
  - Title: "Request Jackett Remote Access"
  - Include: Brief intro, why you're interested, commitment to learning self-hosting
- **Discord/Email:** [To be announced]

We provide temporary access to help you get started. Once provided:

```bash
# Set environment variables
export JACKETT_REMOTE_URL="https://provided-by-team.com"
export JACKETT_REMOTE_API_KEY="provided-api-key"

# Use remote profile (default)
poetry run karma-player search "radiohead ok computer" --profile remote
```

**Note:** Remote access is temporary and best-effort. We encourage self-hosting for privacy and reliability.

**Why self-hosting is better:**
- Complete privacy (your searches aren't visible to anyone)
- No rate limits or shared capacity issues
- Full control over which indexers to use
- No dependency on external services

---

### 🎛️ Advanced: Indexer Configuration

Karma Player supports **multiple indexer profiles** via `karma_player/indexers.yaml`. This lets you customize which torrent sources to search and switch between local/remote setups.

#### Default Profiles

**`local`** - Your own Jackett instance
```yaml
profiles:
  local:
    indexers:
      - name: jackett_local
        base_url: http://localhost:9117
        api_key: ${JACKETT_API_KEY}  # From config
        indexer_id: all  # Search all configured indexers
```

**`remote`** - Shared Jackett instance (18+ indexers)
```yaml
profiles:
  remote:  # Default profile
    indexers:
      - knaben, therarbg, torrentgalaxy, 1337x
      - thepiratebay, internetarchive, kickasstorrents
      - mixtapetorrent, nyaa, tokyotoshokan
      # ... 18+ indexers total
```

**`hybrid`** - Query both local and remote
**`lossless_only`** - FLAC/ALAC only (category 3040)

#### Switch Profiles

```bash
# Use local Jackett
poetry run karma-player search "miles davis" --profile local

# Use remote (default)
poetry run karma-player search "miles davis" --profile remote

# Lossless only
poetry run karma-player search "radiohead" --profile lossless_only
```

#### Customize Your Setup

Edit `karma_player/indexers.yaml`:

```yaml
# Change default profile
default_profile: local  # or remote, hybrid, lossless_only

# Add your own indexers
profiles:
  my_custom:
    description: "My personal setup"
    indexers:
      - name: my_jackett
        type: jackett
        enabled: true
        base_url: https://my-server.com:9117
        api_key: your-api-key
        indexer_id: all
        categories: [3040]  # Lossless only
        timeout: 20

# Disable specific indexers
profiles:
  remote:
    indexers:
      - name: thepiratebay
        enabled: false  # Skip this indexer
```

#### Audio Categories

Jackett uses category codes for filtering:
- `3000` - Audio (general)
- `3010` - MP3
- `3040` - **Lossless (FLAC, ALAC)** ← Hi-res audio
- `3020` - Video (music videos)
- `3030` - Audiobooks
- `3050` - Other

**Pro tip:** Use `lossless_only` profile for audiophile searches.

> **Note:** PyPI package coming soon. For now, install from source.

---

## 🎮 Usage Examples

### Basic Search
```bash
poetry run karma-player search "Miles Davis Kind of Blue"
```

AI finds the canonical album, searches 18+ indexers, returns best FLAC.

### Format Preference
```bash
# Prefer FLAC, fallback to MP3 if none found
poetry run karma-player search "Pink Floyd Dark Side" --format FLAC

# ONLY FLAC (strict, no fallback)
poetry run karma-player search "Radiohead OK Computer" --format FLAC --strict
```

### Auto-Mode (Let AI Handle Everything)
```bash
poetry run karma-player search "fear of the dark iron maiden"
# Select album → Choose [4] Just get it for me!
# System tries: single track → album → other albums
```

### Fast Mode (Skip MusicBrainz)
```bash
poetry run karma-player search "esperanza spalding" --skip-musicbrainz --min-seeders 5
```

Direct torrent search. Faster but less accurate.

### Check Configuration
```bash
poetry run karma-player config show
```

---

## 🤝 How This Compares

### vs Spotify / Apple Music
- **Them:** You rent access. They decide what's available.
- **Us:** Community owns the trust network. You decide what to download.

### vs What.CD / Redacted
- **Them:** Interview process. Invite trees. Ratio requirements. Expert gatekeeping.
- **Us:** Open access. Two-tier validation. Progressive path to Core (requires technical skills).

### vs Public Torrent Sites
- **Them:** 50 results. No quality control. Decision paralysis. Fake files.
- **Us:** Network validates once. Everyone benefits forever. AI picks best match.

### vs Soulseek
- **Complementary sources, not competitors**
- **Soulseek strengths:** Excellent for rare/underground music discovery (80-100k concurrent users), strong community
- **Karma Player adds:** MusicBrainz canonical metadata + AI quality ranking + community validation
- **Best together:** Soulseek for discovery, TTN for mainstream verification
- **Integration potential:** If Soulseek wants to join as a search source, we're open (our metadata layer could enhance their network)

### What Makes TTN Different

```
Private Trackers:  Quality ✓✓✓ | Access ✗   | Retention ✓✓✓ | Organization ✓✓✓
Public Torrents:   Quality ✗   | Access ✓✓✓ | Retention ✗   | Organization ✗
Soulseek:          Quality ✓✓  | Access ✓✓  | Retention ✓✓  | Organization ✓
Trust Tune:        Quality ✓✓  | Access ✓✓  | Retention ?   | Organization ✓✓
                   (validated)   (open)      (TBD)          (MusicBrainz)
```

**The bet:** Combining MusicBrainz (canonical metadata) + distributed validation (community proof) + AI (intent understanding) creates something better than gatekeeping OR anarchy.

---

## 📊 Current Status

### ✅ Working Today (v0.1.1)
- AI query parsing (multi-provider)
- MusicBrainz metadata lookup
- Multi-indexer torrent search (18+ indexers)
- Album-aware filtering with mismatch detection
- Quality ranking (hi-res detection)
- Auto-mode with fallback strategies
- Top 3 torrent recommendations
- Detailed AI reasoning

### 🚧 Coming Soon (Phase 1 - Next 2 Weeks)
- Gun.js distributed ledger
- Network-first search (check verified files first)
- Vote tracking (local + network)
- Pending validation queue
- Verified file badges

### 📅 Not Yet Implemented (Phase 2+)
- Core Listener role and application process
- Cryptographic validation proof system
- Karma economy and progression paths
- Creator compensation framework
- Economic sustainability model

---

## 🧪 Development

### Dev Setup
```bash
git clone https://github.com/trust-tune-net/karma-player
cd karma-player
poetry install
poetry run karma-player init
```

### Run Tests
```bash
poetry run pytest              # Run all tests
poetry run pytest --cov        # With coverage
```

**Current test status:** 97/103 passing (94% pass rate)

### Contribute

We're looking for:
- **Early adopters** to test Phase 0
- **Core Listener candidates** (audiophiles, engineers, musicians)
- **Developers** to build Phase 1+
- **Feedback** on the vision

See:
- [docs/EPICS_TASKS.md](docs/EPICS_TASKS.md) - Development tasks
- [docs/mvp_vision.md](docs/mvp_vision.md) - Full technical vision

---

## 💭 Philosophy: Building Trust at Scale

> *"The internet has infinite content. The problem isn't access — it's knowing what/where to trust."*

### The Old Model: Gatekeeping
```
Private trackers solved quality with exclusivity:
  Interviews → Invite trees → Ratio requirements
        ↓
  Only "experts" validate
        ↓
  High quality, low accessibility
```

### The New Model: Community Validation
```
Trust Tune solves quality with distributed proof:
  Casual votes → Core validates with proof → Network trusts
        ↓
  Anyone can participate at their level
        ↓
  High quality, high accessibility
```

### Why This Works

**Network effects:**
- More users → More votes → More validation work
- More Core Listeners → Faster validation → More verified files
- More verified files → Better search results → More users

**Economic alignment:**
- Casuals benefit from validated network
- Core benefits from compensation (future)
- Creators benefit from transparent payments (future)
- Everyone benefits from trust infrastructure

**Technical soundness:**
- Cryptographic proofs prevent spam
- Pseudonymous votes preserve privacy
- Distributed ledger prevents censorship
- Open source enables auditing

**Social scalability:**
- Two-tier system separates participation levels
- Karma progression creates clear path to Core
- Transparent validation builds trust
- Community governance prevents capture

---

## 🌍 Focus: Music Quality First

**Karma Player is built specifically for music.**

Why music?
- Clear, measurable quality metrics (format, bitrate, spectral analysis)
- Canonical metadata already exists (MusicBrainz)
- Passionate community (audiophiles) ready to validate
- Acoustic fingerprinting tech is mature (Chromaprint)
- Audio quality matters deeply to listeners

The validation principles *could* theoretically apply to other content types (software integrity, document preservation, educational materials), but **we're laser-focused on music**. Better to do one thing exceptionally well than many things poorly.

---

---

## 🎯 Success Metrics (Realistic Targets)

### Phase 0 (Current - Proof of Concept)
**Goal:** Prove AI + MusicBrainz can beat manual torrent search

**Metrics:**
- ✅ **10+ users** successfully search and download (targeting 50+ in 2 months)
- ✅ **80%+ correct album selection** (AI matches user intent, not random results)
- ✅ **Edge case handling** (album mismatch detection, format fallback, auto-mode)
- 📊 **<10 seconds** average search time (MusicBrainz + Jackett aggregation)
- 📊 **User satisfaction:** 8/10+ rating ("better than manual search")

**Current status:** 6 active testers, 85% album match rate, collecting feedback

### Phase 1 (Months 1-3 - Network Launch)
**Goal:** Launch Gun.js distributed ledger + voting system

**Metrics:**
- 🎯 **100+ users** actively voting on downloads
- 🎯 **500+ files** with vote counts in distributed ledger
- 🎯 **<500ms network query** latency (Gun.js performance test)
- 🎯 **50%+ searches** hit files with existing votes (network effect starting)
- ⚠️ **Bootstrap node stability** (single point of failure risk - need 3+ nodes)

**Unknowns:** Gun.js scalability beyond 1k users, vote spam mitigation effectiveness

### Phase 2 (Months 4-6 - Core Validation)
**Goal:** Recruit and onboard Core Listeners with cryptographic validation

**Metrics:**
- 🎯 **10-20 Core Listeners** (realistic given technical requirements)
- 🎯 **100+ files** with cryptographic VERIFIED status
- 🎯 **<2 weeks** average validation time for popular albums
- 🎯 **Zero false positives** (no fake files marked as verified)
- 🎯 **Core retention:** 70%+ active after 3 months

**Challenges:** Finding qualified validators, validation tooling complexity, spam prevention

### Phase 3 (Months 7-12 - Creator Opt-In)
**Goal:** Launch artist dashboard + optional compensation framework

**Metrics:**
- 🎯 **5-10 artists** opt into network (early adopters, indie musicians)
- 🎯 **Read-only analytics** dashboard (who's listening, where, quality preferences)
- 🎯 **Zero artist complaints** (DMCA takedowns respected within 48 hours)
- 🎯 **Payment proof-of-concept** (if legal, 1-2 artists receive compensation)

**Reality check:** Most artists won't participate until network proves value at scale

### Long-Term (Years 2-3 - IF Phase 1-3 Succeed)
**Aspirational targets (not guarantees):**

- 🌍 **10,000+ active users** contributing votes and seeding
- 🌍 **100,000+ verified files** across 100+ Core Listeners
- 🌍 **1,000+ artists** opted in (transparent analytics + compensation)
- 🌍 **Self-sustaining economics** (95% creator / 5% network split proven)
- 🌍 **Legal clarity** (court precedent or regulatory guidance established)

**Honest assessment:** If we hit 10% of these numbers, we've succeeded in building something valuable. These are stretch goals, not promises.

---

## ❓ Open Questions (We Don't Have All Answers)

**Things we're actively researching:**

### Technical Unknowns
1. **Gun.js scalability** - Can it handle 10k+ concurrent users? 100k? We don't know yet.
2. **Vote spam prevention** - How do we stop Sybil attacks without sacrificing privacy?
3. **Bootstrap node centralization** - How to avoid single points of failure in "distributed" network?
4. **Validation proof format** - What's the right balance between security and usability?
5. **Network latency** - Can we hit <500ms query times with distributed lookups?

### Economic Unknowns
1. **Will Core Listeners validate for free?** - Phase 0-2 has no compensation. Is passion enough?
2. **Creator participation** - Will artists opt in before seeing $$$? Chicken-and-egg problem.
3. **Sustainable economics** - Can 5% network fee cover infrastructure + Core compensation at scale?
4. **Payment distribution** - How to fairly split revenue across thousands of plays?

### Legal Unknowns
1. **Secondary liability risk** - Will courts see this as "inducement" (MGM v. Grokster precedent)?
2. **DMCA safe harbor** - Do we qualify? We don't host content, but do we "facilitate"?
3. **International law** - Different countries, different rules. How to navigate?
4. **Artist opt-in model** - Does explicit creator permission mitigate legal risk?

### Social Unknowns
1. **Community governance** - Can we avoid toxicity/capture as network grows?
2. **Core vs. Casual tension** - Will two-tier system create resentment or cooperation?
3. **Quality standards drift** - Will validation rigor decrease over time (Eternal September)?
4. **Trust in pseudonymous validators** - Will users trust cryptographic proof from strangers?

### Metadata Unknowns
1. **MusicBrainz gaps** - What % of music is missing? (Especially non-Western, underground, regional)
2. **Album matching edge cases** - How to handle live versions, remasters, deluxe editions?
3. **Subjective quality** - Can we validate "proper masters" vs. "brick-walled remasters"?

**Our approach:** Ship Phase 0 → Collect data → Answer questions with evidence → Iterate or pivot.

We'd rather admit uncertainty than fake confidence. If you have insights on any of these, **please share feedback.**

---

## 🙏 Credits & Inspiration

### Built With
- [MusicBrainz](https://musicbrainz.org/) - Canonical music metadata
- [Jackett](https://github.com/Jackett/Jackett) - Torrent indexer aggregation
- [LiteLLM](https://github.com/BerriAI/litellm) - Multi-provider AI abstraction
- [Click](https://click.palletsprojects.com/) - CLI framework
- [Gun.js](https://gun.eco/) - Distributed graph database (Phase 1+)

### Inspired By
- **What.CD / Redacted** - Curator-validated quality (but we add: open access, two-tier system)
- **Soulseek** - Decentralized sharing (potential integration partner)
- **BitTorrent** - Distributed protocol (we add: trust layer)
- **Bitcoin** - Proof-of-work validation (we use: proof-of-analysis)
- **Wikipedia** - Community validation (we add: cryptographic proof)

---

## 📧 Get Involved

**Project Status:** Phase 0 (MVP) - Proving the concept

**We're looking for:**
- 🎧 Early adopters to test and provide feedback
- 🎵 Audiophiles interested in becoming Core Listeners
- 💻 Developers to build Phase 1+ (Gun.js, validation proofs)
- 💰 Potential donors to fund development
- 🤝 Partners (Soulseek integration? MusicBrainz collaboration?)

**How to help:**
1. Try Karma Player and give feedback
2. Join discussions about validation approaches
3. Contribute code (see [docs/EPICS_TASKS.md](docs/EPICS_TASKS.md))
4. Spread the word to audiophile communities
5. Donate to fund Phase 1+ development

---

## 📝 License

[License TBD - will be open source]

---

```
╔════════════════════════════════════════════════════════════╗
║                                                            ║
║   The Trust Tune Network is growing.                      ║
║                                                            ║
║   Not by gatekeeping. Not by algorithms.                  ║
║   By community validation, one proof at a time.           ║
║                                                            ║
║   Join us. Build trust.                                   ║
║                                                            ║
╚════════════════════════════════════════════════════════════╝
```

**Phase 0 is live. Phase 1 is coming. The network is waiting for you.**
